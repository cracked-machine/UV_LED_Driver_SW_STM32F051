/*
 * LedManager.c
 *
 *  Created on: Jun 17, 2020
 *      Author: chris
 */


#include "LedManager.h"

/*
 *
 *	@brief	Enable UV LEDs, disable Normal LEDs
 *
 *	@param None
 *	@retval 	UVBOX_LidOpen,
				UVBOX_LidClosed
 *
 */
UVBOX_SystemStateTypedef LM_EnableUVMode()
{
	HAL_GPIO_WritePin(GPIOA, STATUS_GREEN_Pin, GPIO_PIN_RESET);
	HAL_GPIO_WritePin(GPIOA, STATUS_RED_Pin, GPIO_PIN_SET);

	TIM1->CCR1 = MAX_UVLED_PWM_PERIOD;
	TIM1->CCR2 = MAX_UVLED_PWM_PERIOD;
	TIM1->CCR3 = MAX_UVLED_PWM_PERIOD;
	TIM1->CCR4 = MAX_UVLED_PWM_PERIOD;
	TIM14->CCR1 = 0;

	return UVBOX_evLidClosed;
}

/*
 *
 *	@brief Enable Normal LEDs, disable UV LEDs
 *
 *	@param None
 *	@retval 	UVBOX_LidOpen,
				UVBOX_LidClosed
 *
 */
UVBOX_SystemStateTypedef LM_DisableUVMode()
{
	HAL_GPIO_WritePin(GPIOA, STATUS_GREEN_Pin, GPIO_PIN_SET);
	HAL_GPIO_WritePin(GPIOA, STATUS_RED_Pin, GPIO_PIN_RESET);

	TIM1->CCR1 = 0;
	TIM1->CCR2 = 0;
	TIM1->CCR3 = 0;
	TIM1->CCR4 = 0;
	TIM14->CCR1 = MAX_LED_PWM_PERIOD;

	return UVBOX_evLidOpened;
}

